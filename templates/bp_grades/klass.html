{% extends "base.html" %}
{% set uplink = url_for('bp_grades.term', termn=termn) %}
{% set uplink_help = "Notenzeugnisse: %s. Halbjahr" % termn %}

{% block title %}Erstellen{% endblock %}

{% block content %}
    <h3>Klasse/Gruppe {{klass_stream}}, <span>{{termn}}.&nbsp;Halbjahr</span></h3>
    <p>Notenzeugnisse werden für alle markierten Schüler erstellt. Klicken Sie
    auf das entsprechende Kontrollkästchen, um die Markierung für einen Schüler
    zu entfernen – oder wiederherzustellen. Schüler, für die keine Noten
    mit passendem Maßstab gespeichert sind, können nicht
    selektiert werden. Auch Schüler, für die besondere Zeugnistypen gewählt
    sind, können nicht selektiert werden.
    </p>
    <p>Nur Schüler, die "aktuell" in der Klasse/Gruppe sind, werden hier
    angezeigt.
    </p>
    <p>Zeugnisse, die hier nicht erstellt werden können, sind über die
    <a href="{{url_for('bp_grades.pupils', klass=klass_stream.klass)}}">
    Seite für Einzelzeugnisse</a> erhältlich (ggf. in der neuen Klasse/Gruppe).
    </p>
    <p>Sie können das Ausstellungsdatum der Zeugnisse auf der
    <a href="{{ url_for('bp_grades.current_term', termn=termn)}}">
    entsprechenden Seite</a> setzen bzw. anpassen.
    </p>
    <p>Um die Zeugnisse zu erstellen, klicken Sie auf die Schaltfläche
    „Erstellen“.
    </p>

    <form id="dataform" class="pure-form pure-form-aligned widelabel" method="POST">
        {{ form.csrf_token }}

        <fieldset>
            <div class="pure-control-group">
                <label for="{{ form.DATE_D.id }}">
                <a href="{{url_for('bp_grades.current_term', termn=termn)}}">
                    ↪ Ausstellungsdatum
                </a>
                </label>
                {{ form.DATE_D(readonly=true) }}
            </div>
            {% if form.VDATE_D %}
            <p>Für „gymnasiale“ Versetzungen am Ende der 11. und 12.
            Klasse ist auch das Datum der Notenkonferenz erforderlich.
            Dieses kann man auf der entsprechenden Seite einstellen.
            </p>
            <div class="pure-control-group">
                <label for="{{ form.VDATE_D.id }}">
                <a href="{{url_for('bp_grades.current_term', termn=termn)}}">
                    ↪ Konferenzdatum
                </a>
                </label>
                {{ form.VDATE_D(readonly=true) }}
            </div>
            {% endif %}
             <button type="submit" class="pure-button submit-button"
                    style="margin: 0.5rem 1rem;">
                Erstellen
            </button>
        </fieldset>

        <hr />

        {% for pid, pname, ok in pupils %}
        <div class="form-group">
            <input name="Pupil" type="checkbox" value="{{pid}}"
                    {% if ok %}checked{% else %}disabled{% endif %}>
            <span class="menu-item">{{pname}}</span>
<!-- Link to single report page, with term preset? -->
        </div>
        {% endfor %}
    </form>
{% endblock %}
